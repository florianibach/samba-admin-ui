{{ define "content" }}

<div class="d-flex align-items-center justify-content-between mb-3">
  <h1 class="m-0">Groups for {{ .Data.User }}</h1>
  <a class="btn btn-outline-secondary" href="/users">Back</a>
</div>

{{ if .Data.Error }}
<div class="alert alert-danger" role="alert">
  {{ .Data.Error }}
</div>
{{ end }}

<div class="card">
  <div class="card-body">
    <form method="post" action="/users/groups/save">
      <input type="hidden" name="user" value="{{ .Data.User }}">

      <div class="mb-3">
        {{ range .Data.Groups }}
          <div class="form-check">
            <input class="form-check-input" type="checkbox" name="groups" value="{{ .Name }}" id="g-{{ .Name }}"
              {{ if .Selected }}checked{{ end }}>
            <label class="form-check-label" for="g-{{ .Name }}">
              {{ .Name }}
            </label>
          </div>
        {{ else }}
          <div class="text-muted">No managed groups found. Create groups first.</div>
        {{ end }}
      </div>

      <button class="btn btn-primary" type="submit">Save</button>
    </form>

    <div class="form-text mt-2">
      This updates DB assignments and applies them to Linux immediately.
    </div>
  </div>
</div>

{{ end }}
